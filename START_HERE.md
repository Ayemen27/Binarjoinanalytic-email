# ๐ฏ ุงุจุฏุฃ ูู ููุง - ุญู ูุดููุฉ Class Not Found ููุงุฆูุงู

> **ุงููุดููุฉ:** `Class "Lobage\Planify\Models\Plan" not found` ุนูู VPS  
> **ุงูุณุจุจ:** ูุดุงูู ูู ุงูุตูุงุญูุงุช ูุงูู Cache  
> **ุงูุญู:** ูุธุงู ูุดุฑ ุชููุงุฆู ูุชูุงูู โ

---

## ๐จ ูู ุงููุดููุฉ ููุฌูุฏุฉ ุงูุขูุ โ ุฅุตูุงุญ ููุฑู

ุนูู ุงูู VPSุ ููุฐ ูุฐุง ุงูุฃูุฑ:

```bash
cd /home/administrator/panel
sudo bash deploy.sh
```

**โ ุงููุดููุฉ ุณุชุญู ููุฑุงู!**

---

## ๐ ูููุน ุงููุดููุฉ ูู ุงูุนูุฏุฉ (ุฅุนุฏุงุฏ ููุฑุฉ ูุงุญุฏุฉ)

### ุงูุฎุทูุฉ 1: ุชูุนูู ุงููุดุฑ ุงูุชููุงุฆู

ุนูู VPS:
```bash
cd /home/administrator/panel
cp hooks/post-merge .git/hooks/post-merge
chmod +x .git/hooks/post-merge
```

### ุงูุฎุทูุฉ 2: ุงูุชูููุง! ๐

ุงูุขู ูู ูู ูุฑุฉ ุชููุฐ `git pull`ุ ุณูุญุฏุซ ุงูุชุงูู ุชููุงุฆูุงู:
- โ ุถุจุท ุงูุตูุงุญูุงุช
- โ ุชุญุฏูุซ Composer
- โ ูุณุญ ุงูู Cache
- โ ุฅุนุงุฏุฉ ุชุญููู PHP-FPM

---

## ๐ ุงููููุงุช ุงูุชู ุชู ุฅูุดุงุคูุง

### ููุงุณุชุฎุฏุงู ุงููููู:
- **`deploy.sh`** โ ุงูุณูุฑุจุช ุงูุฑุฆูุณู (ููุฐู ุจุนุฏ git pull)
- **`fix-permissions.sh`** โ ูุฅุตูุงุญ ุงูุตูุงุญูุงุช ููุท

### ููุชูุซูู:
- **`QUICK_FIX.md`** โ ุญู ุณุฑูุน ุฎุทูุฉ ุจุฎุทูุฉ
- **`DEPLOYMENT.md`** โ ุฏููู ุดุงูู ููุตู
- **`README_DEPLOYMENT.md`** โ ููุฎุต ุณุฑูุน

### ููุฃุชูุชุฉ:
- **`hooks/post-merge`** โ Git Hook ููุชุดุบูู ุงูุชููุงุฆู

---

## ๐ป ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ุงูุณููุงุฑูู 1: ูุฏูู ูุดููุฉ ุงูุขู
```bash
sudo bash deploy.sh
```

### ุงูุณููุงุฑูู 2: ุจุนุฏ git pull
```bash
git pull
# ุฅุฐุง ูุนูุช Git Hookุ ูู ุดูุก ุชููุงุฆู!
# ูุฅูุง:
sudo bash deploy.sh
```

### ุงูุณููุงุฑูู 3: ูุดููุฉ ูู ุงูุตูุงุญูุงุช ููุท
```bash
sudo bash fix-permissions.sh
```

---

## ๐ ููู ูุนููุ

### deploy.sh ูููู ุจู:
1. ุณุญุจ ุขุฎุฑ ุงูุชุญุฏูุซุงุช (`git pull`)
2. ุชุซุจูุช/ุชุญุฏูุซ Composer packages
3. **ุถุจุท ุตูุงุญูุงุช ุงููููุงุช:**
   - ุงููุฌูุฏุงุช: `755`
   - ุงููููุงุช: `644`
   - `storage/` ู `bootstrap/cache/`: `775`
   - ุงููุงูู: `www-data:www-data`
4. **ูุณุญ ุฌููุน ุงูู Caches:**
   - Config cache
   - Route cache
   - View cache
   - Application cache
5. ุฅุนุงุฏุฉ ุจูุงุก Composer autoload
6. **ุฅุนุงุฏุฉ ุชุญููู PHP-FPM** (ูุณุญ OPcache)
7. ุงูุชุญูู ูู ุชุญููู Class

---

## โ๏ธ ุงูุชุฎุตูุต (ุฅุฐุง ูุฒู ุงูุฃูุฑ)

ุฅุฐุง ูุงู ูุณุชุฎุฏู PHP-FPM ูุฎุชูู ุนู `www-data`ุ ุนุฏูู:

**ูู `deploy.sh`:**
```bash
PHP_USER="www-data"    # โ ุบููุฑ ูุฐุง
PHP_GROUP="www-data"   # โ ููุฐุง
```

**ููุนุฑูุฉ ุงููุณุชุฎุฏู ุงูุตุญูุญ:**
```bash
ps aux | grep php-fpm | grep -v grep
```

---

## ๐ ุงูุชุญูู ูู ุงููุฌุงุญ

### 1. ุงุฎุชุจุงุฑ ุชุญููู ุงูู Class:
```bash
sudo -u www-data php -r "require 'vendor/autoload.php'; var_dump(class_exists('Lobage\\Planify\\Models\\Plan'));"
```
**ุงูููุฑูุถ ุชุดูู:** `bool(true)` โ

### 2. ูุฑุงูุจุฉ ุงูููุฌุงุช:
```bash
tail -f storage/logs/laravel.log
```
**ุงูููุฑูุถ ูุง ุชุดูู:** ุฃุฎุทุงุก Class not found โ

### 3. ุงุฎุชุจุงุฑ ุงููููุน:
ุงูุชุญ ุงููุชุตูุญ ูุฌุฑุจ ุงูุชุทุจูู ๐

---

## ๐ ูุดุงูู ุดุงุฆุนุฉ ูุญููููุง

### โ ุงููุดููุฉ: Permission denied ุนูุฏ ุชุดุบูู deploy.sh
**ุงูุญู:**
```bash
sudo bash deploy.sh
```

### โ ุงููุดููุฉ: Git Hook ูุง ูุนูู
**ุงูุญู:**
```bash
chmod +x .git/hooks/post-merge
chmod +x deploy.sh
```

### โ ุงููุดููุฉ: Class not found ูุงุฒุงู ููุฌูุฏ
**ุงูุญู:**
```bash
# ุชุฃูุฏ ูู ูุณุชุฎุฏู PHP-FPM
ps aux | grep php-fpm | grep -v grep

# ุนุฏูู deploy.sh ุญุณุจ ุงููุณุชุฎุฏู ุงูุตุญูุญ
# ุซู:
sudo bash deploy.sh
```

### โ ุงููุดููุฉ: Composer packages ูุฏููุฉ
**ุงูุญู:**
```bash
sudo -u www-data composer update
sudo bash deploy.sh
```

---

## ๐ฆ ุฑูุน ุงูุชุญุฏูุซุงุช ูููุณุชูุฏุน

ูุญูุธ ูุฐู ุงููููุงุช ูู Git:

```bash
git add deploy.sh hooks/ *.md fix-permissions.sh composer.json
git commit -m "Add automated deployment system with permission fixes"
git push
```

ุงูุขู ูู ูู VPS ุฌุฏูุฏุ ููุท:
```bash
git clone <repository>
cd <project>
sudo bash deploy.sh
cp hooks/post-merge .git/hooks/post-merge
chmod +x .git/hooks/post-merge
```

---

## โ Checklist ุงููุฌุงุญ

- [ ] ุงููุดููุฉ ูุญูููุฉ ุญุงููุงู (`sudo bash deploy.sh`)
- [ ] Git Hook ููุนูู (`cp hooks/post-merge .git/hooks/`)
- [ ] ุงูุตูุงุญูุงุช ุตุญูุญุฉ (`ls -la storage/`)
- [ ] Class ูุชุญูู ุจูุฌุงุญ (ุงุฎุชุจุงุฑ ุงูู var_dump)
- [ ] ุงูุชุทุจูู ูุนูู ุจุฏูู ุฃุฎุทุงุก (ุงุฎุชุจุงุฑ ุงููุชุตูุญ)
- [ ] ุงููููุงุช ูุฑููุนุฉ ูููุณุชูุฏุน (`git push`)

---

## ๐ ูุญุชุงุฌ ูุณุงุนุฏุฉุ

1. **ููุญู ุงูุณุฑูุน:** ุงูุชุญ `QUICK_FIX.md`
2. **ููุฏููู ุงููุงูู:** ุงูุชุญ `DEPLOYMENT.md`
3. **ูููู ุงููุธุงู:** ุงูุชุญ `README_DEPLOYMENT.md`

---

## ๐ ุฎูุตูุง!

ุงูุขู ูุฏูู:
- โ ุญู ููุฑู ูููุดููุฉ ุงูุญุงููุฉ
- โ ูุธุงู ูุดุฑ ุชููุงุฆู ูููุน ุชูุฑุงุฑ ุงููุดููุฉ
- โ ุชูุซูู ุดุงูู ููู ุดูุก
- โ ุณูุฑุจุชุงุช ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู

**๐ ุงุณุชูุชุน ุจุงูุจุฑูุฌุฉ ุจุฏูู ููู ูู ูุดุงูู ุงูุตูุงุญูุงุช!**

---

**ุชู ุงูุฅูุดุงุก:** 2025-10-28  
**ุจูุงุณุทุฉ:** Replit Agent  
**ุงููุณุฎุฉ:** 1.0  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู
